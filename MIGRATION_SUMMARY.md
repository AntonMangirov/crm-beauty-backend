# –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏: –ü–æ–ª—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –º–∞—Å—Ç–µ—Ä–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å Prisma

**–§–∞–π–ª**: `prisma/schema.prisma`

–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—å `User`:

- `workSchedule` (Json?) - —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
- `breaks` (Json?) - –ø–µ—Ä–µ—Ä—ã–≤—ã –º–∞—Å—Ç–µ—Ä–∞
- `defaultBufferMinutes` (Int?) @default(15) - –±—É—Ñ–µ—Ä –ø–æ—Å–ª–µ —É—Å–ª—É–≥–∏
- `slotStepMinutes` (Int?) @default(15) - —à–∞–≥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ—Ç–æ–≤

### 2. –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è SQL

**–§–∞–π–ª**: `prisma/migrations/20250125000000_add_master_schedule_settings/migration.sql`

–ú–∏–≥—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ –ø–æ–ª—è —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:

- `workSchedule` ‚Üí NULL
- `breaks` ‚Üí NULL
- `defaultBufferMinutes` ‚Üí 15
- `slotStepMinutes` ‚Üí 15

### 3. –ê–Ω–∞–ª–∏–∑ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–§–∞–π–ª**: `MIGRATION_MASTER_SCHEDULE_SETTINGS.md`

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é**:

   ```bash
   cd crm-beauty-backend
   npx prisma migrate deploy
   # –∏–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
   npx prisma migrate dev
   ```

2. **–û–±–Ω–æ–≤–∏—Ç—å Prisma Client**:

   ```bash
   npx prisma generate
   ```

3. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –û–±–Ω–æ–≤–∏—Ç—å `getTimeslots` –≤ `publicController.ts` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –∏–∑ –ë–î

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –í—Å–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
‚úÖ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è**: –ù–æ–≤—ã–µ –ø–æ–ª—è –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
‚úÖ **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã**: –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

## üìù –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è

1. **GET `/api/public/:slug/timeslots`** - `getTimeslots`
   - –ë—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `calculateAvailableSlots`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –ø–æ–ª—è –Ω–µ –∑–∞–¥–∞–Ω—ã

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Ñ–∞–π–ª–µ:
`MIGRATION_MASTER_SCHEDULE_SETTINGS.md`
