# Настройка загрузки изображений

## Режимы работы

Система поддерживает два режима загрузки изображений:

### 1. Локальное хранилище (по умолчанию, для тестирования)

**Не требует регистрации!** Файлы сохраняются локально в папку `uploads/`.

**Настройка:**
```env
UPLOAD_MODE=local
```

Или просто не указывайте переменные Cloudinary - система автоматически использует локальный режим.

**Преимущества:**
- ✅ Не требует регистрации
- ✅ Работает сразу из коробки
- ✅ Идеально для разработки и тестирования

**Недостатки:**
- ❌ Файлы хранятся на сервере
- ❌ Нет автоматической оптимизации
- ❌ Нужно настраивать раздачу статических файлов

### 2. Cloudinary (для продакшена)

**Требует регистрации** на [cloudinary.com](https://cloudinary.com) (бесплатный план доступен).

**Настройка:**
```env
UPLOAD_MODE=cloudinary
CLOUDINARY_CLOUD_NAME=your-cloud-name
CLOUDINARY_API_KEY=your-api-key
CLOUDINARY_API_SECRET=your-api-secret
```

**Преимущества:**
- ✅ Автоматическая оптимизация изображений
- ✅ CDN для быстрой загрузки
- ✅ Не нагружает сервер
- ✅ Автоматическое преобразование в WebP

## Установка зависимостей

### Для локального режима (минимально):
```bash
npm install multer
npm install --save-dev @types/multer
```

### Для Cloudinary режима:
```bash
npm install cloudinary multer
npm install --save-dev @types/multer
```

## Тестирование

### Локальный режим (без Cloudinary):

1. Убедитесь, что `UPLOAD_MODE=local` или не указаны переменные Cloudinary
2. Запустите сервер
3. Загрузите фото через форму в кабинете мастера
4. Файлы будут сохранены в `uploads/` и доступны по `/uploads/filename.jpg`

### Cloudinary режим:

1. Зарегистрируйтесь на [cloudinary.com](https://cloudinary.com)
2. Получите учетные данные из Dashboard
3. Добавьте их в `.env`
4. Установите `UPLOAD_MODE=cloudinary`
5. Перезапустите сервер

## Примечания

- Максимальный размер файла: 5MB
- Поддерживаемые форматы: все изображения (JPEG, PNG, GIF, WebP и т.д.)
- Старые фото автоматически удаляются при загрузке новых
- В локальном режиме файлы доступны по URL: `http://localhost:3000/uploads/filename.jpg`

